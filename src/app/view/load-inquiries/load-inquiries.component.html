<div class="container-fluid" [ngClass]="{'disabled': isDisableDiv == true}">
  <div *ngIf="view == 'load'">
    <div class="header_div">
      <h2>Proposal / Policy Inquiries</h2>
    </div>
    <div class="body_div">
      <div style="min-height: 40px;">
        <form class="form-inline" style="margin: 10px;" [formGroup]="form_search">

          <div class="btn-group btn-group-toggle" ngbRadioGroup name="radioBasic" style="padding-bottom: 10px;"
            formControlName="equality">
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="equal"> Equal
            </label>
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="with"> With
            </label>
          </div>

          <div class="form-group" style="padding-bottom: 10px;">
            <select class="form-control" id="inlineFormCustomSelect" formControlName="column">
              <option value="pprnum">Proposal No</option>
              <option value="polnum">Policy No </option>
              <option value="ppdini">Main Life Name </option>
              <option value="ppdnic">Nic </option>
              <option value="prdcod">Product </option>
              <option value="pprsta">Proposal Status </option>
              <option value="advcod">Advisor Code </option>
            </select>
          </div>
          <div class="form-group" style="padding-bottom: 10px;">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for..." formControlName="data">
              <span class="input-group-btn">
                <button class="btn btn-info" type="button" (click)="search()">Search</button>
              </span>
            </div>
          </div>
        </form>
      </div>

      <div style="overflow-x: auto">
        <div style="min-width: 950px;">
          <ngx-datatable class='material' [rows]='rows' [columns]="columns" [columnMode]="'force'" [headerHeight]="50"
            [footerHeight]="50" [rowHeight]="'auto'" [externalPaging]="true" [count]="page.totalElements" [offset]="page.pageNumber"
            [limit]="10" (page)='setPage($event)' (activate)="getDetails($event)">

          </ngx-datatable>
        </div>
      </div>

    </div>
  </div>

  <div *ngIf="view == 'details'">
    <div class="header_div">
      <h2>Inquiry</h2>
    </div>
    <div class="body_div" style="overflow-x: hidden">

      <div style="min-height: 40px;">
        <input class="btn btn-primary" type="button" value="Back" (click)="loadView($event)" />
      </div>

      <div class="row" style="min-height: 40px; margin-top: 10px;">
        <div class="col-md-3 col-sm-6" style="border-right: solid 1px #b6b6b6">

          <table class="tbl-layout">
            <tbody>
              <tr>
                <td style="width: 160px;">Proposal No</td>
                <td>:</td>
                <td>{{inruiry.generalData.proposanNo}}</td>
              </tr>
              <tr>
                <td>Policy No</td>
                <td>:</td>
                <td>{{inruiry.generalData.policyNo}}</td>
              </tr>
              <tr>
                <td>Commencement Date</td>
                <td>:</td>
                <td>{{inruiry.generalData.commeencementDate}}</td>
              </tr>
              <tr>
                <td>Proposal Status</td>
                <td>:</td>
                <td>{{inruiry.generalData.proposalDescription}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="col-md-4 col-sm-6" style="border-left: solid 1px #b6b6b6">

          <table class="tbl-layout">
            <tbody>
              <tr>
                <td style="width: 160px;">Branch Code</td>
                <td>:</td>
                <td>{{inruiry.generalData.branchCode}}</td>
              </tr>
              <tr>
                <td>Product Name</td>
                <td>:</td>
                <td>{{inruiry.generalData.productName}}</td>
              </tr>
              <tr>
                <td>Expire Date</td>
                <td>:</td>
                <td>{{inruiry.generalData.expDate}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row" style="margin-top: 10px">
        <div class="col-md-12" style="margin-top: 10px;">
          <ngb-tabset>
            <ngb-tab title="Insured">
              <ng-template ngbTabContent>
                <div class="tab-div1">
                  <table class="tbl-layout">
                    <tbody>

                      <tr>
                        <td style="width: 160px;">Full Name </td>
                        <td style="width: 10px;">:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.fName}}</td>
                      </tr>

                      <tr>
                        <td>Name with Initials </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.iniName}}</td>
                      </tr>

                      <tr>
                        <td>Address </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.address}}</td>
                      </tr>

                      <tr>
                        <td>Nic. No </td>
                        <td>:</td>
                        <td colspan="4">{{this.inruiry.mainlifeInquiry.nic}}</td>
                      </tr>

                      <tr>
                        <td>Mobile </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.mobile}}</td>
                      </tr>

                      <tr>
                        <td style="width: 110px;">Tele. No </td>
                        <td style="width: 10px;">:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.tele}}</td>
                      </tr>

                      <tr>
                        <td>Bank Code </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.bankCode}}</td>
                      </tr>

                      <tr>
                        <td>Bank Account No </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.bankAcc}}</td>
                      </tr>
                      <tr>
                        <td>Previlage Card No </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.previlageCard}}</td>
                      </tr>
                      <tr>
                        <td>Email </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.email}}</td>
                      </tr>
                      <tr>
                        <td>Date of Birth </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.dob}}</td>
                      </tr>
                      <tr>
                        <td>Age next Birthday </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.ageNext}}</td>
                      </tr>
                      <tr>
                        <td>Sex </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.sex}}</td>
                      </tr>
                      <tr>
                        <td>Civil Status </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.status}}</td>
                      </tr>
                      <tr>
                        <td>Occupation/ Professtion </td>
                        <td>:</td>
                        <td colspan="4">{{inruiry.mainlifeInquiry.occupation}}</td>
                      </tr>

                    </tbody>
                  </table>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab title="Spouse">
              <ng-template ngbTabContent>
                <div class="tab-div1">
                  <table class="tbl-layout">
                    <tbody>
                      <tr>
                        <td style="width: 160px;">Title </td>
                        <td>:</td>
                        <td></td>
                      </tr>

                      <tr>
                        <td>Full Name </td>
                        <td>:</td>
                        <td>{{inruiry.spouseInquiry.fName}}</td>
                      </tr>

                      <tr>
                        <td>Name with Initials </td>
                        <td>:</td>
                        <td>{{inruiry.spouseInquiry.iniName}}</td>
                      </tr>
                      <tr>
                        <td>Nic. No </td>
                        <td>:</td>
                        <td>{{inruiry.spouseInquiry.nic}}</td>
                      </tr>

                      <tr>
                        <td>Date of Birth </td>
                        <td>:</td>
                        <td>{{inruiry.spouseInquiry.dob}}</td>
                      </tr>
                      <tr>
                        <td>Occupation/ Professtion </td>
                        <td>:</td>
                        <td>{{inruiry.spouseInquiry.occupation}}</td>
                      </tr>

                    </tbody>
                  </table>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab title="Children">
              <ng-template ngbTabContent>
                  <div class="tab-div1" style=" overflow-x: auto;">
                      <table class="table table-striped table-hover" style="min-width: 900px;">
                    <tr>
                      <th>Name</th>
                      <th>Relation</th>
                      <th>DOB</th>
                      <th>Age</th>
                      <th>Sex</th>
                      <th>CIBC</th>
                      <th>HRBC</th>
                      <th>HBC</th>
                      <th>SUHRBC</th>
                    </tr>

                    <tr *ngFor="let child of inruiry.childInquirys">
                      <td>{{child.name}}</td>
                      <td>{{child.relation}}</td>
                      <td>{{child.dob}}</td>
                      <td>{{child.age}}</td>
                      <td>{{child.sex}}</td>
                      <td>{{child.cibc}}</td>
                      <td>{{child.hrbc}}</td>
                      <td>{{child.hbc}}</td>
                      <td>{{child.suhrbc}}</td>
                    </tr>

                  </table>
                </div>

              </ng-template>
            </ngb-tab>
            <ngb-tab title="Pre. / Ben. Details">
              <ng-template ngbTabContent>
                <div class="tab-div1" style="height: 550px; overflow-x: hidden; overflow-y: hidden;">
                  <div class="row " style="min-height: 40px; margin-top: 10px;">
                    <div class="col-md-3 col-sm-6" style="border-right: solid 1px #b6b6b6">

                      <table class="tbl-layout">
                        <tbody>
                          <tr>
                            <td style="width: 160px;">Payment Frequancy</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.payTerm}}</td>
                          </tr>
                          <tr>
                            <td>Term</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.topTerm}}</td>
                          </tr>
                          <tr>
                            <td>Basic Sum Assured</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.basicSum}}</td>
                          </tr>
                          <tr>
                            <td>Premium for B.S.A Rs.</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.premiumForBasicSum}}</td>
                          </tr>
                          <tr>
                            <td>Total Premium</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.totalPremiun}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="col-md-4 col-sm-6" style="border-left: solid 1px #b6b6b6">

                      <table class="tbl-layout">
                        <tbody>
                          <tr>
                            <td style="width: 160px;">Target Premium</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.targetPremium}}</td>
                          </tr>
                          <tr>
                            <td>Relife Term</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.relTerm}}</td>
                          </tr>
                          <tr>
                            <td>Sum at Risk Main</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.sumAtRiskMain}}</td>
                          </tr>
                          <tr>
                            <td>Sum at Risk Spouse</td>
                            <td>:</td>
                            <td>{{inruiry.generalData.sumAtRiskSpouses}}</td>
                          </tr>
                          <tr>
                            <td>&nbsp;</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <ngb-tabset>
                    <ngb-tab title="Insured">
                      <ng-template ngbTabContent>
                        <div class="tab-div2" style="height: 375px;">
                          <table class="table table-striped table-hover" style="min-width: 700px;">
                            <tr>
                              <th>Rider Code</th>
                              <th>Rider name</th>
                              <th>Term</th>
                              <th>Sum Assured</th>
                              <th>Premium</th>
                            </tr>


                            <tr *ngFor="let benefict of inruiry.benefictMainlife">
                              <td>{{benefict.code}}</td>
                              <td>{{benefict.name}}</td>
                              <td>{{benefict.term}}</td>
                              <td>{{benefict.sumAssured}}</td>
                              <td>{{benefict.premium}}</td>

                            </tr>

                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Spouse">
                      <ng-template ngbTabContent>
                        <div class="tab-div2" style="height: 375px; min-width: 700px; overflow-x: auto">
                          <table class="table table-striped table-hover">
                            <tr>
                              <th>Rider Code</th>
                              <th>Rider name</th>
                              <th>Term</th>
                              <th>Sum Assured</th>
                              <th>Premium</th>
                            </tr>


                            <tr *ngFor="let benefict of inruiry.benefictSpouse">
                              <td>{{benefict.code}}</td>
                              <td>{{benefict.name}}</td>
                              <td>{{benefict.term}}</td>
                              <td>{{benefict.sumAssured}}</td>
                              <td>{{benefict.premium}}</td>

                            </tr>

                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Children">
                      <ng-template ngbTabContent>
                        <div class="tab-div2" style="height: 375px; min-width: 700px; overflow-x: auto">
                          <table class="table table-striped table-hover">
                            <tr>
                              <th>Rider Code</th>
                              <th>Rider name</th>
                              <th>Term</th>
                              <th>Sum Assured</th>
                              <th>Premium</th>
                            </tr>


                            <tr *ngFor="let benefict of inruiry.benefictChildren">
                              <td>{{benefict.code}}</td>
                              <td>{{benefict.name}}</td>
                              <td>{{benefict.term}}</td>
                              <td>{{benefict.sumAssured}}</td>
                              <td>{{benefict.premium}}</td>

                            </tr>

                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab title="Nominee">
              <ng-template ngbTabContent>

                <div class="tab-div1" style="overflow-x: auto;">
                  <table class="table table-striped table-hover" style="min-width: 950px;">
                    <tr>
                      <th>Name</th>
                      <th>Relation</th>
                      <th>NIC</th>
                      <th>DOB</th>
                      <th>Share %</th>
                      <th>Guardian Name</th>
                      <th>Guardian N</th>
                      <th>Guardian D</th>
                      <th>Guardian R</th>
                    </tr>

                    <tr *ngFor="let nominee of inruiry.nomineeInquires">
                      <td>{{nominee.name}}</td>
                      <td>{{nominee.relation}}</td>
                      <td>{{nominee.nic}}</td>
                      <td>{{nominee.dob}}</td>
                      <td>{{nominee.shared}} % </td>
                      <td>{{nominee.gName}}</td>
                      <td>{{nominee.gNic}}</td>
                      <td>{{nominee.gDob}}</td>
                      <td>{{nominee.gRelation}}</td>
                    </tr>

                  </table>
                </div>

              </ng-template>
            </ngb-tab>
            <ngb-tab title="Settlement">
              <ng-template ngbTabContent>
                <div class="tab-div1" style="height: 375px !important; overflow-x: auto;">
                  <table class="table table-striped table-hover" style="min-width: 700px;">
                    <tr>
                      <th>Number</th>
                      <th>Code</th>
                      <th>Name</th>
                      <th>Amount</th>
                      <th>Branch</th>
                      <th>Status</th>
                      <th>Mode</th>
                    </tr>

                    <tr *ngFor="let settlement of inruiry.settlement">
                      <td>{{settlement.number}}</td>
                      <td>{{settlement.Code}}</td>
                      <td>{{settlement.Name}}</td>
                      <td>{{settlement.totPremium}}</td>
                      <td>{{settlement.branch}}</td>
                      <td>{{settlement.status}}</td>
                      <td>{{settlement.mode}}</td>

                    </tr>
                  </table>

                </div>
                <div style="height: 50px;">
                  <div class="container-fluid">
                    <label>Total Amount : {{settlementTot}}</label>
                  </div>
                </div>



              </ng-template>
            </ngb-tab>
            <ngb-tab title="Requirments">
              <ng-template ngbTabContent>

                <div class="tab-div1">
                  <ngb-tabset>
                    <ngb-tab title="Insured">
                      <ng-template ngbTabContent>
                        <div class="tab-div2" style="height: 375px !important; overflow-x: auto;">
                          <table class="table table-striped table-hover" style="min-width: 700px;">
                            <tr>
                              <th>Test Code</th>
                              <th>Test Name</th>
                              <th>Origin</th>
                              <th>Recived</th>
                              <th>Hospital</th>
                              <th>Date</th>
                              <th>Amount</th>
                              <th>Status</th>
                              <th>Additional Notes</th>
                            </tr>


                            <tr *ngFor="let medReq of inruiry.medicalReqMainlife">
                              <td>{{medReq.testCode}}</td>
                              <td>{{medReq.testName}}</td>
                              <td>{{medReq.origin}}</td>
                              <td>{{medReq.recived}}</td>
                              <td>{{medReq.hospital}}</td>
                              <td>{{medReq.testDate}}</td>
                              <td>{{medReq.payAmount}}</td>
                              <td>{{medReq.payStatus}}</td>
                              <td>{{medReq.additionalNotes}}</td>

                            </tr>

                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Spouse">
                      <ng-template ngbTabContent>
                        <div class="tab-div2" style="height: 375px !important; overflow-x: auto;">
                          <table class="table table-striped table-hover" style="min-width: 700px;">
                            <tr>
                              <th>Test Code</th>
                              <th>Test Name</th>
                              <th>Origin</th>
                              <th>Recived</th>
                              <th>Hospital</th>
                              <th>Date</th>
                              <th>Amount</th>
                              <th>Status</th>
                              <th>Additional Notes</th>
                            </tr>


                            <tr *ngFor="let medReq of inruiry.medicalReqSpouse">
                              <td>{{medReq.testCode}}</td>
                              <td>{{medReq.testName}}</td>
                              <td>{{medReq.origin}}</td>
                              <td>{{medReq.recived}}</td>
                              <td>{{medReq.hospital}}</td>
                              <td>{{medReq.testDate}}</td>
                              <td>{{medReq.payAmount}}</td>
                              <td>{{medReq.payStatus}}</td>
                              <td>{{medReq.additionalNotes}}</td>

                            </tr>

                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Children">
                      <ng-template ngbTabContent>
                        <div class="tab-div2" style="height: 375px !important; overflow-x: auto;">
                          <table class="table table-striped table-hover" style="min-width: 700px;">
                            <tr>
                              <th>Test Code</th>
                              <th>Test Name</th>
                              <th>Origin</th>
                              <th>Recived</th>
                              <th>Hospital</th>
                              <th>Date</th>
                              <th>Amount</th>
                              <th>Status</th>
                              <th>Additional Notes</th>
                            </tr>


                            <tr *ngFor="let medReq of inruiry.medicalReqChildren">
                              <td>{{medReq.testCode}}</td>
                              <td>{{medReq.testName}}</td>
                              <td>{{medReq.origin}}</td>
                              <td>{{medReq.recived}}</td>
                              <td>{{medReq.hospital}}</td>
                              <td>{{medReq.testDate}}</td>
                              <td>{{medReq.payAmount}}</td>
                              <td>{{medReq.payStatus}}</td>
                              <td>{{medReq.additionalNotes}}</td>

                            </tr>

                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>

              </ng-template>
            </ngb-tab>
            <ngb-tab title="Transfer Info">
              <ng-template ngbTabContent>

                <div class="tab-div1" style=" overflow-x: auto;">
                  <table class="table table-striped table-hover" style="min-width: 670px;">
                    <tr>
                      <th>Agent Code</th>
                      <th>Agent Name</th>
                      <th>Agent Class</th>
                      <th>From Date</th>
                      <th>To Date</th>
                    </tr>


                    <tr *ngFor="let transInfo of inruiry.transferHistory">
                      <td>{{transInfo.agentCode}}</td>
                      <td>{{transInfo.name}}</td>
                      <td>{{transInfo.agentClass}}</td>
                      <td>{{transInfo.fromDate}}</td>
                      <td>{{transInfo.toDate}}</td>

                    </tr>

                  </table>
                </div>

              </ng-template>
            </ngb-tab>
            <ngb-tab title="Payment History">
              <ng-template ngbTabContent>

                  <div class="tab-div1" style=" overflow-x: auto;">
                      <table class="table table-striped table-hover" style="min-width: 825px;">
                    <tr>
                      <th>Year</th>
                      <th>Month</th>
                      <th>Date</th>
                      <th>Amount Settled</th>
                      <th>Amount Due</th>
                      <th>Due Date</th>
                      <th>Outstanding</th>
                      <th>Ref</th>
                    </tr>


                    <tr *ngFor="let payHis of inruiry.paymentHistory">
                      <td>{{payHis.year}}</td>
                      <td>{{payHis.month}}</td>
                      <td>{{payHis.date}}</td>
                      <td>{{payHis.settledAmt}}</td>
                      <td>{{payHis.dueAmt}}</td>
                      <td>{{payHis.dueDate}}</td>
                      <td>{{payHis.outstanding}}</td>
                      <td>{{payHis.remark}}</td>

                    </tr>

                  </table>

                </div>

              </ng-template>
            </ngb-tab>
            <ngb-tab title="Dispatch. / Acknow:">
              <ng-template ngbTabContent>

                <div class="tab-div1" style="overflow-x: auto;">

                  <table class="tbl-layout" style="min-width: 530px;">
                    <tbody>
                      <tr>
                        <td colspan="3">
                          <h2>Policy Dispatch Details</h2>
                        </td>
                      </tr>
                      <tr>
                        <td style="width: 160px;">Dispatch Date </td>
                        <td style="width: 10px;">:</td>
                        <td colspan="2">{{policyDispatchAcknow.dispatch.dspdat}}</td>
                      </tr>

                      <tr>
                        <td style="width: 160px;">Dispatch to </td>
                        <td style="width: 10px;">:</td>
                        <td>{{policyDispatchAcknow.dispatch.agncod}}</td>
                        <td>{{policyDispatchAcknow.dispatch.agnnam}}</td>
                      </tr>

                      <hr>

                      <tr>
                        <td colspan="3">
                          <h2>Acknowledgement Details</h2>
                        </td>
                      </tr>
                      <tr>
                        <td style="width: 160px;">Acknowledge Date </td>
                        <td style="width: 10px;">:</td>
                        <td colspan="2">{{policyDispatchAcknow.dispatch.ackdat}}</td>
                      </tr>

                      <tr>
                        <td style="width: 160px;">Customer Sing Date </td>
                        <td style="width: 10px;">:</td>
                        <td>{{policyDispatchAcknow.dispatch.cusdat}}</td>
                      </tr>

                      <hr>

                      <tr>
                        <td colspan="3">
                          <h2>ACH Card Dispatch</h2>
                        </td>
                      </tr>
                      <tr>
                        <td style="width: 160px;">Dispatch Date </td>
                        <td style="width: 10px;">:</td>
                        <td colspan="2">{{policyDispatchAcknow.care.cadsdt}}</td>
                      </tr>

                      <tr>
                        <td style="width: 160px;">Remarks </td>
                        <td style="width: 10px;">:</td>
                        <td>{{policyDispatchAcknow.care.remark}}</td>
                      </tr>

                    </tbody>
                  </table>

                </div>

              </ng-template>
            </ngb-tab>
          </ngb-tabset>
        </div>
      </div>
    </div>
  </div>
</div>